(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,C){"use strict";const f=e.createContext({}),w=typeof document<"u"?e.useLayoutEffect:e.useEffect;function o(n,a,l=!1){let i;if(l){const p=({...s},u)=>{const{reactify:m,ymaps:M}=e.useContext(f),[d,y]=e.useState(!1);return w(()=>{a?window[a]?(y(!0),i=m.module(window[a])[n]):M.import(a).then(Y=>{window[a]=Y,m.module(Y)&&(y(!0),i=m.module(Y)[n])}):(i=m.module(M)[n],y(!0))},[]),!i||!d?null:e.createElement(i,{ref:u,...s})};return e.forwardRef(p)}return({...p})=>{const{reactify:s,ymaps:u}=e.useContext(f),[m,M]=e.useState(!1);return e.useLayoutEffect(()=>{a?window[a]?(M(!0),i=s.module(window[a])[n]):u.import(a).then(d=>{window[a]=d,s.module(d)&&(M(!0),i=s.module(d)[n])}):(i=s.module(u)[n],M(!0))},[]),!i||!m?null:e.createElement(i,{...p})}}const h=async(n,a="ru_RU")=>new Promise(async(l,i)=>{if(window.ymaps3){const r=window.ymaps3;await r.ready;const s=(await r.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);s.module(r),l({ymaps:r,reactify:s})}else{const r=document.createElement("script");document.body.appendChild(r),r.type="text/javascript",r.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${a}`,r.onload=async()=>{const p=window.ymaps3;await p.ready;const u=(await p.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);l({ymaps:p,reactify:u})},r.onerror=i}}),L=({apiKey:n,lang:a,children:l,onLoad:i})=>{const[r,p]=e.useState();return w(()=>{h(n,a).then(s=>{p(s),i&&i(s)})},[]),r?e.createElement(f.Provider,{value:r},l):e.createElement(e.Fragment,null)},D=e.memo(L);var c=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(c||{});const S=e.createContext({hint:void 0}),H=({children:n,context:a})=>{const l=e.useContext(a);return e.createElement(S.Provider,{value:l},n)},E=({children:n,hint:a})=>{const{reactify:l,ymaps:i}=e.useContext(f),[r,p]=e.useState(),s=e.useMemo(()=>{if(r){const u=window[c.Hint];return l.module(u).YMapHint}},[r]);return e.useEffect(()=>{if(window[c.Hint]){const u=window[c.Hint];p(l.module(u).YMapHintContext)}else i.import(c.Hint).then(u=>{window[c.Hint]=u,l.module(u)&&p(l.module(u).YMapHintContext)})},[]),!s||!r||!n?e.createElement(e.Fragment,null):e.createElement(s,{hint:a},e.createElement(H,{context:r},n))},v=o("YMapGeolocationControl",c.Controls),F=o("YMapZoomControl",c.Controls),T=o("YMapClusterer",c.Clusterer),j=o("YMapDefaultMarker",c.Markers),x=o("YMap",void 0,!0),b=o("ThemeContext"),B=o("YMapDefaultSchemeLayer"),G=o("YMapDefaultFeaturesLayer"),I=o("YMapLayer"),Z=o("YMapControl"),$=o("YMapControls"),q=o("YMapControlButton"),W=o("YMapTileDataSource"),O=o("YMapMarker"),U=o("YMapListener"),_=o("YMapFeature"),z=o("YMapDefaultSatelliteLayer"),A=o("YMapCollection"),J=o("YMapContainer"),K=o("YMapFeatureDataSource");t.ThemeContext=b,t.YMap=x,t.YMapClusterer=T,t.YMapCollection=A,t.YMapComponentsProvider=D,t.YMapContainer=J,t.YMapControl=Z,t.YMapControlButton=q,t.YMapControls=$,t.YMapDefaultFeaturesLayer=G,t.YMapDefaultMarker=j,t.YMapDefaultSatelliteLayer=z,t.YMapDefaultSchemeLayer=B,t.YMapFeature=_,t.YMapFeatureDataSource=K,t.YMapGeolocationControl=v,t.YMapHint=E,t.YMapHintContext=S,t.YMapLayer=I,t.YMapListener=U,t.YMapMarker=O,t.YMapTileDataSource=W,t.YMapZoomControl=F,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
