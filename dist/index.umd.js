(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,C){"use strict";const d=e.createContext({}),w=typeof document<"u"?e.useLayoutEffect:e.useEffect;function o(n,r,p=!1){let i;if(p){const l=({...s},u)=>{const{reactify:m,ymaps:M}=e.useContext(d),[f,y]=e.useState(!1);return w(()=>{r?window[r]?(y(!0),i=m.module(window[r])[n]):M.import(r).then(Y=>{window[r]=Y,m.module(Y)&&(y(!0),i=m.module(Y)[n])}):(i=m.module(M)[n],y(!0))},[]),!i||!f?null:e.createElement(i,{ref:u,...s})};return e.forwardRef(l)}return({...l})=>{const{reactify:s,ymaps:u}=e.useContext(d),[m,M]=e.useState(!1);return e.useLayoutEffect(()=>{r?window[r]?(M(!0),i=s.module(window[r])[n]):u.import(r).then(f=>{window[r]=f,s.module(f)&&(M(!0),i=s.module(f)[n])}):(i=s.module(u)[n],M(!0))},[]),!i||!m?null:e.createElement(i,{...l})}}const h=async(n,r="ru_RU")=>new Promise(async(p,i)=>{if(window.ymaps3){const a=window.ymaps3;await a.ready;const s=(await a.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);p({ymaps:a,reactify:s})}else{const a=document.createElement("script");document.body.appendChild(a),a.type="text/javascript",a.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${r}`,a.onload=async()=>{const l=window.ymaps3;await l.ready;const u=(await l.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);p({ymaps:l,reactify:u})},a.onerror=i}}),L=({apiKey:n,lang:r,children:p,onLoad:i})=>{const[a,l]=e.useState();return w(()=>{h(n,r).then(s=>{l(s),i&&i(s)})},[]),a?e.createElement(d.Provider,{value:a},p):e.createElement(e.Fragment,null)},D=e.memo(L);var c=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(c||{});const S=e.createContext({hint:void 0}),H=({children:n,context:r})=>{const p=e.useContext(r);return e.createElement(S.Provider,{value:p},n)},E=({children:n,hint:r})=>{const{reactify:p,ymaps:i}=e.useContext(d),[a,l]=e.useState(),s=e.useMemo(()=>{if(a){const u=window[c.Hint];return p.module(u).YMapHint}},[a]);return e.useEffect(()=>{if(window[c.Hint]){const u=window[c.Hint];l(p.module(u).YMapHintContext)}else i.import(c.Hint).then(u=>{window[c.Hint]=u,p.module(u)&&l(p.module(u).YMapHintContext)})},[]),!s||!a||!n?e.createElement(e.Fragment,null):e.createElement(s,{hint:r},e.createElement(H,{context:a},n))},v=o("YMapGeolocationControl",c.Controls),F=o("YMapZoomControl",c.Controls),T=o("YMapClusterer",c.Clusterer),j=o("YMapDefaultMarker",c.Markers),x=o("YMap",void 0,!0),b=o("ThemeContext"),B=o("YMapDefaultSchemeLayer"),G=o("YMapDefaultFeaturesLayer"),I=o("YMapLayer"),Z=o("YMapControl"),$=o("YMapControls"),q=o("YMapControlButton"),W=o("YMapTileDataSource"),O=o("YMapMarker"),U=o("YMapListener"),_=o("YMapFeature"),z=o("YMapDefaultSatelliteLayer"),A=o("YMapCollection"),J=o("YMapContainer"),K=o("YMapFeatureDataSource");t.ThemeContext=b,t.YMap=x,t.YMapClusterer=T,t.YMapCollection=A,t.YMapComponentsProvider=D,t.YMapContainer=J,t.YMapControl=Z,t.YMapControlButton=q,t.YMapControls=$,t.YMapDefaultFeaturesLayer=G,t.YMapDefaultMarker=j,t.YMapDefaultSatelliteLayer=z,t.YMapDefaultSchemeLayer=B,t.YMapFeature=_,t.YMapFeatureDataSource=K,t.YMapGeolocationControl=v,t.YMapHint=E,t.YMapHintContext=S,t.YMapLayer=I,t.YMapListener=U,t.YMapMarker=O,t.YMapTileDataSource=W,t.YMapZoomControl=F,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
