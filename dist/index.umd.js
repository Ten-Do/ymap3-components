(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,C){"use strict";const d=e.createContext({});function o(n,r,l=!1){let i;if(l){const p=({...s},u)=>{const{reactify:m,ymaps:M}=e.useContext(d),[y,f]=e.useState(!1);return e.useLayoutEffect(()=>{r?window[r]?(f(!0),i=m.module(window[r])[n]):M.import(r).then(Y=>{window[r]=Y,m.module(Y)&&(f(!0),i=m.module(Y)[n])}):(i=m.module(M)[n],f(!0))},[]),!i||!y?null:e.createElement(i,{ref:u,...s})};return e.forwardRef(p)}return({...p})=>{const{reactify:s,ymaps:u}=e.useContext(d),[m,M]=e.useState(!1);return e.useLayoutEffect(()=>{r?window[r]?(M(!0),i=s.module(window[r])[n]):u.import(r).then(y=>{window[r]=y,s.module(y)&&(M(!0),i=s.module(y)[n])}):(i=s.module(u)[n],M(!0))},[]),!i||!m?null:e.createElement(i,{...p})}}const L=async(n,r="ru_RU")=>new Promise(async(l,i)=>{if(window.ymaps3){const a=window.ymaps3;await a.ready;const s=(await a.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);l({ymaps:a,reactify:s})}else{const a=document.createElement("script");document.body.appendChild(a),a.type="text/javascript",a.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${r}`,a.onload=async()=>{const p=window.ymaps3;await p.ready;const u=(await p.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);l({ymaps:p,reactify:u})},a.onerror=i}}),S=({apiKey:n,lang:r,children:l,onLoad:i})=>{const[a,p]=e.useState();return e.useLayoutEffect(()=>{L(n,r).then(s=>{p(s),i&&i(s)})},[]),a?e.createElement(d.Provider,{value:a},l):e.createElement(e.Fragment,null)},h=e.memo(S);var c=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(c||{});const w=e.createContext({hint:void 0}),D=({children:n,context:r})=>{const l=e.useContext(r);return e.createElement(w.Provider,{value:l},n)},H=({children:n,hint:r})=>{const{reactify:l,ymaps:i}=e.useContext(d),[a,p]=e.useState(),s=e.useMemo(()=>{if(a){const u=window[c.Hint];return l.module(u).YMapHint}},[a]);return e.useEffect(()=>{if(window[c.Hint]){const u=window[c.Hint];p(l.module(u).YMapHintContext)}else i.import(c.Hint).then(u=>{window[c.Hint]=u,l.module(u)&&p(l.module(u).YMapHintContext)})},[]),!s||!a||!n?e.createElement(e.Fragment,null):e.createElement(s,{hint:r},e.createElement(D,{context:a},n))},E=o("YMapGeolocationControl",c.Controls),v=o("YMapZoomControl",c.Controls),F=o("YMapClusterer",c.Clusterer),T=o("YMapDefaultMarker",c.Markers),j=o("YMap",void 0,!0),x=o("ThemeContext"),b=o("YMapDefaultSchemeLayer"),B=o("YMapDefaultFeaturesLayer"),G=o("YMapLayer"),Z=o("YMapControl"),$=o("YMapControls"),q=o("YMapControlButton"),I=o("YMapTileDataSource"),W=o("YMapMarker"),O=o("YMapListener"),U=o("YMapFeature"),_=o("YMapDefaultSatelliteLayer"),z=o("YMapCollection"),A=o("YMapContainer"),J=o("YMapFeatureDataSource");t.ThemeContext=x,t.YMap=j,t.YMapClusterer=F,t.YMapCollection=z,t.YMapComponentsProvider=h,t.YMapContainer=A,t.YMapControl=Z,t.YMapControlButton=q,t.YMapControls=$,t.YMapDefaultFeaturesLayer=B,t.YMapDefaultMarker=T,t.YMapDefaultSatelliteLayer=_,t.YMapDefaultSchemeLayer=b,t.YMapFeature=U,t.YMapFeatureDataSource=J,t.YMapGeolocationControl=E,t.YMapHint=H,t.YMapHintContext=w,t.YMapLayer=G,t.YMapListener=O,t.YMapMarker=W,t.YMapTileDataSource=I,t.YMapZoomControl=v,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
