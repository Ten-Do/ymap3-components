(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,y){"use strict";const m=e.createContext({});function a(n,r){return r?({...o})=>{const{reactify:i,ymaps:p}=e.useContext(m),[l,f]=e.useState();return e.useEffect(()=>{window[r]?f(i.module(window[r])[n]):p.import(r).then(M=>{window[r]=M,i.module(M)&&f(i.module(M)[n])})},[]),l?e.createElement(e.Fragment,null,e.createElement(l,{...o})):null}:({...c})=>{const{reactify:o,ymaps:i}=e.useContext(m),p=e.useMemo(()=>o.module(i)[n],[o,i]);return e.createElement(e.Fragment,null,e.createElement(p,{...c}))}}const C=async(n,r="ru_RU")=>new Promise(async(s,c)=>{if(window.ymaps3){const o=window.ymaps3;await o.ready;const p=(await o.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,y);s({ymaps:o,reactify:p})}else{const o=document.createElement("script");document.body.appendChild(o),o.type="text/javascript",o.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${r}`,o.onload=async()=>{const i=window.ymaps3;await i.ready;const l=(await i.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,y);s({ymaps:i,reactify:l})},o.onerror=c}}),d=({apiKey:n,lang:r,children:s,onLoad:c})=>{const[o,i]=e.useState();return e.useLayoutEffect(()=>{C(n,r).then(p=>{i(p),c&&c(p)})},[]),o?e.createElement(m.Provider,{value:o},s):e.createElement(e.Fragment,null)},w=e.memo(d,(n,r)=>n.apiKey===r.apiKey&&n.lang===r.lang);var u=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(u||{});const Y=e.createContext({hint:void 0}),S=({children:n,context:r})=>{const s=e.useContext(r);return e.createElement(Y.Provider,{value:s},n)},h=({children:n,hint:r})=>{const{reactify:s,ymaps:c}=e.useContext(m),[o,i]=e.useState(),p=e.useMemo(()=>{if(o){const l=window[u.Hint];return s.module(l).YMapHint}},[o]);return e.useEffect(()=>{if(window[u.Hint]){const l=window[u.Hint];i(s.module(l).YMapHintContext)}else c.import(u.Hint).then(l=>{window[u.Hint]=l,s.module(l)&&i(s.module(l).YMapHintContext)})},[]),!p||!o||!n?e.createElement(e.Fragment,null):e.createElement(p,{hint:r},e.createElement(S,{context:o},n))},D=a("YMapGeolocationControl",u.Controls),H=a("YMapZoomControl",u.Controls),L=a("YMapClusterer",u.Clusterer),E=a("YMapDefaultMarker",u.Markers),F=a("YMap"),T=a("ThemeContext"),v=a("YMapDefaultSchemeLayer"),j=a("YMapDefaultFeaturesLayer"),x=a("YMapLayer"),b=a("YMapControl"),B=a("YMapControls"),G=a("YMapControlButton"),Z=a("YMapTileDataSource"),$=a("YMapMarker"),q=a("YMapListener"),K=a("YMapFeature"),W=a("YMapDefaultSatelliteLayer"),k=a("YMapCollection"),O=a("YMapContainer"),U=a("YMapFeatureDataSource");t.ThemeContext=T,t.YMap=F,t.YMapClusterer=L,t.YMapCollection=k,t.YMapComponentsProvider=w,t.YMapContainer=O,t.YMapControl=b,t.YMapControlButton=G,t.YMapControls=B,t.YMapDefaultFeaturesLayer=j,t.YMapDefaultMarker=E,t.YMapDefaultSatelliteLayer=W,t.YMapDefaultSchemeLayer=v,t.YMapFeature=K,t.YMapFeatureDataSource=U,t.YMapGeolocationControl=D,t.YMapHint=h,t.YMapHintContext=Y,t.YMapLayer=x,t.YMapListener=q,t.YMapMarker=$,t.YMapTileDataSource=Z,t.YMapZoomControl=H,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
