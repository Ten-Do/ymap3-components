(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,C){"use strict";const d=e.createContext({});function a(n,o,l=!1){let i;if(l){const p=({...s},u)=>{const{reactify:m,ymaps:M}=e.useContext(d),[y,f]=e.useState(!1);return e.useLayoutEffect(()=>{o?window[o]?(f(!0),i=m.module(window[o])[n]):M.import(o).then(Y=>{window[o]=Y,m.module(Y)&&(f(!0),i=m.module(Y)[n])}):(i=m.module(M)[n],f(!0))},[]),!i||!y?null:e.createElement(i,{ref:u,...s})};return e.forwardRef(p)}return({...p})=>{const{reactify:s,ymaps:u}=e.useContext(d),[m,M]=e.useState(!1);return e.useLayoutEffect(()=>{o?window[o]?(M(!0),i=s.module(window[o])[n]):u.import(o).then(y=>{window[o]=y,s.module(y)&&(M(!0),i=s.module(y)[n])}):(i=s.module(u)[n],M(!0))},[]),!i||!m?null:e.createElement(i,{...p})}}const L=async(n,o="ru_RU")=>new Promise(async(l,i)=>{if(window.ymaps3){const r=window.ymaps3;await r.ready;const s=(await r.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);l({ymaps:r,reactify:s})}else{const r=document.createElement("script");document.body.appendChild(r),r.type="text/javascript",r.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${o}`,r.onload=async()=>{const p=window.ymaps3;await p.ready;const u=(await p.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,C);l({ymaps:p,reactify:u})},r.onerror=i}}),S=({apiKey:n,lang:o,children:l,onLoad:i})=>{const[r,p]=e.useState();return e.useLayoutEffect(()=>{L(n,o).then(s=>{p(s),i&&i(s)})},[]),r?e.createElement(d.Provider,{value:r},l):e.createElement(e.Fragment,null)},h=e.memo(S,(n,o)=>n.apiKey===o.apiKey&&n.lang===o.lang);var c=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(c||{});const w=e.createContext({hint:void 0}),D=({children:n,context:o})=>{const l=e.useContext(o);return e.createElement(w.Provider,{value:l},n)},H=({children:n,hint:o})=>{const{reactify:l,ymaps:i}=e.useContext(d),[r,p]=e.useState(),s=e.useMemo(()=>{if(r){const u=window[c.Hint];return l.module(u).YMapHint}},[r]);return e.useEffect(()=>{if(window[c.Hint]){const u=window[c.Hint];p(l.module(u).YMapHintContext)}else i.import(c.Hint).then(u=>{window[c.Hint]=u,l.module(u)&&p(l.module(u).YMapHintContext)})},[]),!s||!r||!n?e.createElement(e.Fragment,null):e.createElement(s,{hint:o},e.createElement(D,{context:r},n))},E=a("YMapGeolocationControl",c.Controls),v=a("YMapZoomControl",c.Controls),F=a("YMapClusterer",c.Clusterer),T=a("YMapDefaultMarker",c.Markers),j=a("YMap",void 0,!0),x=a("ThemeContext"),b=a("YMapDefaultSchemeLayer"),B=a("YMapDefaultFeaturesLayer"),G=a("YMapLayer"),Z=a("YMapControl"),$=a("YMapControls"),q=a("YMapControlButton"),I=a("YMapTileDataSource"),K=a("YMapMarker"),W=a("YMapListener"),O=a("YMapFeature"),U=a("YMapDefaultSatelliteLayer"),_=a("YMapCollection"),z=a("YMapContainer"),A=a("YMapFeatureDataSource");t.ThemeContext=x,t.YMap=j,t.YMapClusterer=F,t.YMapCollection=_,t.YMapComponentsProvider=h,t.YMapContainer=z,t.YMapControl=Z,t.YMapControlButton=q,t.YMapControls=$,t.YMapDefaultFeaturesLayer=B,t.YMapDefaultMarker=T,t.YMapDefaultSatelliteLayer=U,t.YMapDefaultSchemeLayer=b,t.YMapFeature=O,t.YMapFeatureDataSource=A,t.YMapGeolocationControl=E,t.YMapHint=H,t.YMapHintContext=w,t.YMapLayer=G,t.YMapListener=W,t.YMapMarker=K,t.YMapTileDataSource=I,t.YMapZoomControl=v,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
